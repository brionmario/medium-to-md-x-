<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>How to set-up WSO2 Identity Server User Portal in an development environment</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">How to set-up WSO2 Identity Server User Portal in an development environment</h1>
</header>
<section data-field="subtitle" class="p-summary">
The upcoming WSO2 Identity Server version 5.10.0 will have redesigned UIs with improved UX. The Dashboard has been deprecated and been…
</section>
<section data-field="body" class="e-content">
<section name="3a4d" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="96e4" id="96e4" class="graf graf--h3 graf--leading graf--title">How to set-up WSO2 Identity Server User Portal in an development environment</h3><p name="cf7a" id="cf7a" class="graf graf--p graf-after--h3">The upcoming <a href="https://wso2.com/identity-and-access-management/" data-href="https://wso2.com/identity-and-access-management/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">WSO2 Identity Server</a> version 5.10.0 will have redesigned UIs with improved UX. The Dashboard has been deprecated and been replaced with a new User Portal. The overall appearance has also been upgraded to maintain consistency across the product.</p><p name="0700" id="0700" class="graf graf--p graf-after--p">In order to achieve the above, a centralized theming mechanism is a must. Therefore, all the front-end portals have been moved to a single mono-repo called “Identity Apps” (<a href="https://github.com/wso2/identity-apps" data-href="https://github.com/wso2/identity-apps" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">https://github.com/wso2/identity-apps</a>).</p><p name="8184" id="8184" class="graf graf--p graf-after--p">When the final version of the WSO2 Identity Server 5.10.0 is released, the user portal will be available under the following URl.</p><pre name="bba9" id="bba9" class="graf graf--pre graf-after--p"><em class="markup--em markup--pre-em">http(s)://SERVER_HOST/t/TENANT_DOMAIN/user-portal</em></pre><p name="e323" id="e323" class="graf graf--p graf-after--pre">If you are planning on setting up the repo in a development environment follow the steps below.</p><p name="cd09" id="cd09" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Pre-requisites</strong></p><ol class="postList"><li name="309d" id="309d" class="graf graf--li graf-after--p">Install <a href="https://nodejs.org/en/download/" data-href="https://nodejs.org/en/download/" class="markup--anchor markup--li-anchor" rel="noopener nofollow noopener" target="_blank">node</a> if you haven’t already(npm is already bundled with node).</li><li name="9f85" id="9f85" class="graf graf--li graf-after--li">Install <a href="https://maven.apache.org/download.cgi" data-href="https://maven.apache.org/download.cgi" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">maven</a> (Needed to run mvn commands).</li><li name="a517" id="a517" class="graf graf--li graf-after--li">A running Identity Server v 5.10. (If you want to build from the source follow the instructions listed <a href="https://github.com/wso2/product-is" data-href="https://github.com/wso2/product-is" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">here</a>).</li></ol><p name="2524" id="2524" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">Configuring Identity Server</strong></p><blockquote name="3207" id="3207" class="graf graf--blockquote graf-after--p">Default dev origin, hostname and port set for the User Portal is <a href="https://localhost:9000." data-href="https://localhost:9000." class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank">https://localhost:9000.</a> So the following configurations will have to change accordingly if you change the port or any other configurations.</blockquote><ol class="postList"><li name="1f4b" id="1f4b" class="graf graf--li graf-after--blockquote">Allowing Cross-Origin requests to the Identity Server.</li></ol><p name="355e" id="355e" class="graf graf--p graf-after--li">Cross-origin requests will be blocked by default as a security measure. So you have to put the following CORS filter to the following config file in the WSO2 Identity Server distribution pack.</p><pre name="c1a6" id="c1a6" class="graf graf--pre graf-after--p">&lt;IS_HOME&gt;/repository/resources/conf/templates/repository/conf/tomcat/web.xml.j2</pre><figure name="6927" id="6927" class="graf graf--figure graf--iframe graf-after--pre"><script src="https://gist.github.com/brionmario/304f9e6391a38067c7b10f3a11f61e28.js"></script><figcaption class="imageCaption">CORS Filter</figcaption></figure><p name="38d2" id="38d2" class="graf graf--p graf-after--figure">2. Add your hostname and port as a trusted FIDO2 origin.</p><p name="8041" id="8041" class="graf graf--p graf-after--p">Whitelist the dev URL in the FIDO configurations found in the following file.</p><pre name="b4e6" id="b4e6" class="graf graf--pre graf-after--p">&lt;IS_HOME&gt;/repository/resources/conf/templates/repository/conf/identity/identity.xml.j2</pre><figure name="27a7" id="27a7" class="graf graf--figure graf--iframe graf-after--pre"><script src="https://gist.github.com/brionmario/3f418c67bf8a2842f4ec390451e4415f.js"></script><figcaption class="imageCaption">FIDO Configuration</figcaption></figure><p name="b415" id="b415" class="graf graf--p graf-after--figure">3. Restart the Identity Server.</p><p name="f92a" id="f92a" class="graf graf--p graf-after--p">4. Configure the callback URLs for the User Portal.</p><p name="383d" id="383d" class="graf graf--p graf-after--p">Log in to the management console <a href="https://localhost:9443/carbon/application/configure-authentication-flow.jsp?spName=travelocity.com" data-href="https://localhost:9443/carbon/application/configure-authentication-flow.jsp?spName=travelocity.com" class="markup--anchor markup--p-anchor" target="_blank">https://SERVER_HOST/carbon</a></p><p name="4fba" id="4fba" class="graf graf--p graf-after--p">Go to service provider listing and click on edit in User Portal portal list item.</p><figure name="9edb" id="9edb" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*ArGKJ2HGBymTJYrYkW5LTA.png" data-width="3828" data-height="2000" src="https://cdn-images-1.medium.com/max/800/1*ArGKJ2HGBymTJYrYkW5LTA.png"><figcaption class="imageCaption">Service Provider Listing</figcaption></figure><p name="4633" id="4633" class="graf graf--p graf-after--figure">In the edit view, expand the “Inbound Authentication Configuration” section, and further expand the “OAuth/OpenID Connect Configuration”. Click on edit under User Portal list item.</p><figure name="9b8b" id="9b8b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*8GEH34emQnw4oa_Wx5cBew.png" data-width="3812" data-height="1997" src="https://cdn-images-1.medium.com/max/800/1*8GEH34emQnw4oa_Wx5cBew.png"><figcaption class="imageCaption">OAuth/OpenID Connect Configuration Editing</figcaption></figure><p name="98bd" id="98bd" class="graf graf--p graf-after--figure">You can simple change the port to <em class="markup--em markup--p-em">9000 </em>or you can add a regexp as follows.</p><pre name="f940" id="f940" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">regexp=(https://localhost:9443/user-portal/login|https://localhost:9000/user-portal/login)</code></pre><figure name="39c1" id="39c1" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*DyKyRbreFrhUuugNlelH9A.png" data-width="3816" data-height="1989" src="https://cdn-images-1.medium.com/max/800/1*DyKyRbreFrhUuugNlelH9A.png"><figcaption class="imageCaption">Changing callback URL</figcaption></figure><p name="6090" id="6090" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">Building the Identity Apps repo</strong></p><p name="cf94" id="cf94" class="graf graf--p graf-after--p">You can fork the original repo or directly clone the original repo and start working on it, but I suggest you create your own fork.</p><pre name="706d" id="706d" class="graf graf--pre graf-after--p">git clone <a href="https://github.com/wso2/identity-apps" data-href="https://github.com/wso2/identity-apps" class="markup--anchor markup--pre-anchor" rel="noopener" target="_blank">https://github.com/brionmario/identity-apps</a><br>cd <a href="https://github.com/wso2/identity-apps" data-href="https://github.com/wso2/identity-apps" class="markup--anchor markup--pre-anchor" rel="noopener" target="_blank">identity-apps</a><br>mvn clean install or npm run build</pre><p name="bcb0" id="bcb0" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">Running the User Portal in dev mode</strong></p><p name="2ba9" id="2ba9" class="graf graf--p graf-after--p">After the build is finished, navigate to the user portal directory and run the portal using the webpack dev server.</p><pre name="6a89" id="6a89" class="graf graf--pre graf-after--p">cd apps/user-portal<br>npm start</pre><p name="fdab" id="fdab" class="graf graf--p graf-after--pre">The portal will be served from <a href="https://localhost:9000/user-portal" data-href="https://localhost:9000/user-portal" class="markup--anchor markup--p-anchor" target="_blank">https://localhost:9000/user-portal</a></p><figure name="8ca6" id="8ca6" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*g30DebU_d7xnNbT4s2kJrQ.png" data-width="3820" data-height="2152" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*g30DebU_d7xnNbT4s2kJrQ.png"><figcaption class="imageCaption">User Portal in Dev Mode</figcaption></figure><p name="57a5" id="57a5" class="graf graf--p graf-after--figure graf--trailing">Signing off… ✌️❤️</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@brionmario" class="p-author h-card">Brion Mario</a> on <a href="https://medium.com/p/d406d15ec703"><time class="dt-published" datetime="2020-03-17T06:54:22.594Z">March 17, 2020</time></a>.</p><p><a href="https://medium.com/@brionmario/how-to-set-up-wso2-identity-server-user-portal-in-an-development-environment-d406d15ec703" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on April 5, 2023.</p></footer></article></body></html>